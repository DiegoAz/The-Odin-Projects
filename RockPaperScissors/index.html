<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script type="text/javascript">
      function computerPlay() {
        var computerPlay = Math.random();
        if (computerPlay <= 1 / 3) {
          computerPlay = 'Rock';
        } else if (computerPlay <= 2 / 3) {
          computerPlay = 'Paper';
        } else {
          computerPlay = 'Scissors';
        }
        return computerPlay;
      }

      function playRound(playerSelection, computerSelection) {
        const player = playerSelection.toUpperCase();
        const computer = computerSelection.toUpperCase();
        const messagePlayerWinner = `You WIN! ${player} always beats ${computer}`;
        const messageComputerWinner = `You LOSE! ${computer} always beats ${player}`;
        const messageTie = `TIEEEE, you and the computer select ${player}`;
        let message;
        if (player === computer) {
          message = messageTie;
        } else if (player === 'PAPER') {
          if (computer === 'SCISSORS') {
            message = messageComputerWinner;
          } else if (computer === 'ROCK') {
            message = messagePlayerWinner;
          }
        } else if (player === 'SCISSORS') {
          if (computer === 'ROCK') {
            message = messageComputerWinner;
          } else if (computer === 'PAPER') {
            message = messagePlayerWinner;
          }
        } else if (player === 'ROCK') {
          if (computer === 'PAPER') {
            message = messageComputerWinner;
          } else if (computer === 'SCISSORS') {
            message = messagePlayerWinner;
          }
        }
        return message;
      }

      const playerSelection = prompt("Paper, Rock or Scissors?");
      function game() {
        var wins = 0;
        var defeats = 0;
        var ties = 0;
        var result;
        var summary;
        for (let i = 0; i < 5; i++) {
          let computerSelection = computerPlay();
          var message = playRound(playerSelection, computerSelection);
          console.log(message);
          if (message.includes('WIN')) {
            wins += 1;
          } else if (message.includes('LOSE')) {
            defeats += 1;
          } else {
            ties += 1;
          }
          if (wins == 3 || defeats == 3 || ties == 3) {
            break;
          }
        }
        summary = `\nSummary: ${wins}W ${defeats}D ${ties}T`;
        if (wins >= 3) {
          result = `You WIN! ${summary}`;
        } else if (defeats >= 3) {
          result = `You LOSE! ${summary}`;
        } else {
          result = `NO winner!. ${summary}`;
        }
        return result;
      }
      console.log(game());
    </script>
  </body>
</html>
